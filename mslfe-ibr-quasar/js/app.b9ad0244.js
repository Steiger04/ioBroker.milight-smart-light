(function(e){function t(t){for(var o,i,a=t[0],c=t[1],u=t[2],l=0,f=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var a=n[i];0!==s[a]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},i={1:0},s={1:0},r=[];function a(e){return c.p+"js/"+({}[e]||e)+"."+{2:"4d31b377",3:"2202c460",4:"9f09ea19",5:"22a8e8e4"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={2:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{2:"e68e42b0",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0"}[e]+".css",s=c.p+o,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var u=r[a],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===s))return t()}var f=document.getElementsByTagName("style");for(a=0;a<f.length;a++){u=f[a],l=u.getAttribute("data-href");if(l===o||l===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete i[e],d.parentNode.removeChild(d),n(r)},d.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){i[e]=0})));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,n){o=s[e]=[t,n]}));t.push(o[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=a(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",f.name="ChunkLoadError",f.type=o,f.request=i,n[1](f)}s[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var d=l;r.push([0,0]),n()})({0:function(e,t,n){e.exports=n("2f39")},1:function(e,t){},"2f39":function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getInstancesAsArray",(function(){return O})),n.d(o,"getInstanceNames",(function(){return x})),n.d(o,"getGroupsFromInstanceId",(function(){return A})),n.d(o,"getZonesFromGroupId",(function(){return T})),n.d(o,"oneZoneFromGroupActive",(function(){return F})),n.d(o,"allZonesFromGroupActive",(function(){return P})),n.d(o,"getColorFromZone",(function(){return D})),n.d(o,"getAllowedPickerFromZone",(function(){return E})),n.d(o,"getActivePickerFromZone",(function(){return M})),n.d(o,"isWhiteTemperatureZone",(function(){return N}));var i={};n.r(i),n.d(i,"setAllMslids",(function(){return B})),n.d(i,"setInstances",(function(){return H})),n.d(i,"setState",(function(){return W})),n.d(i,"setStateFromClient",(function(){return G})),n.d(i,"setActivePicker",(function(){return J})),n.d(i,"setActionMode",(function(){return Q})),n.d(i,"setDebounceTime",(function(){return K}));var s={};n.r(s),n.d(s,"setAllMslids",(function(){return oe})),n.d(s,"setInstances",(function(){return ie})),n.d(s,"setState",(function(){return se})),n.d(s,"setStateFromClient",(function(){return re})),n.d(s,"setActivePicker",(function(){return ae})),n.d(s,"setActionMode",(function(){return ce})),n.d(s,"setDebounceTime",(function(){return ue}));var r=n("967e"),a=n.n(r),c=(n("a481"),n("96cf"),n("fa84")),u=n.n(c),l=(n("573e"),n("7d6e"),n("e54f"),n("44391"),n("4605"),n("f580"),n("5b2b"),n("8753"),n("2967"),n("7e67"),n("d770"),n("dd82"),n("922c"),n("c32e"),n("a151"),n("8bc7"),n("d67f"),n("880e"),n("1c10"),n("9482"),n("e797"),n("4848"),n("e9fd"),n("195c"),n("64e9"),n("33c5"),n("4f62"),n("0dbc"),n("4953"),n("81db"),n("2e52"),n("22485"),n("7797"),n("e592"),n("70ca"),n("2318"),n("24bd"),n("8f27"),n("3064"),n("c9a2"),n("8767"),n("4a8e"),n("b828"),n("3c1c"),n("21cb"),n("c00e"),n("e4a8"),n("e4d3"),n("f4d9"),n("b794"),n("af24"),n("7c9c"),n("7bb2"),n("64f7"),n("c382"),n("f5d1"),n("3cec"),n("c00ee"),n("d450"),n("ca07"),n("14e3"),n("1dba"),n("674a"),n("de26"),n("6721"),n("25e9"),n("fc83"),n("98e5"),n("605a"),n("ba60"),n("df07"),n("7903"),n("e046"),n("58af"),n("7713"),n("0571"),n("3e27"),n("6837"),n("3fc9"),n("0693"),n("bf41"),n("985d"),n("4e2f"),n("31cd"),n("2b0e")),f=n("b05d"),d=n("f508"),h=n("b12a");l["default"].use(f["a"],{config:{dark:!0},plugins:{Loading:d["a"],AppFullscreen:h["a"]}});var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},p=[],g={name:"App"},v=g,b=n("2877"),_=Object(b["a"])(v,m,p,!1,null,null,null),k=_.exports,y=n("2f62"),w={ids:{},debounceTime:200},C=(n("6b54"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("cadf"),n("06db"),n("4f7f"),n("5df3"),n("1c4c"),n("4db1")),j=n.n(C),S=n("66cb"),I=n.n(S),O=function(e){return j()(e.ids.instances)},x=function(e){return Array.from(new Set(j()(e.ids.groups).map((function(e){return e[1].from}))))},A=function(e){return function(t){return Object.fromEntries(j()(e.ids.groups).filter((function(e){return e[1].from===t})))}},T=function(e){return function(t){return Object.fromEntries(j()(e.ids.zones).filter((function(e){return e[1].common.group_id===t})))}},F=function(e,t){return function(n){return Object.keys(t.getZonesFromGroupId(n)).map((function(t){return e.ids.statevalues[t+".on"].val})).includes(!0)}},P=function(e,t){return function(n){return Object.keys(t.getZonesFromGroupId(n)).map((function(t){return e.ids.statevalues[t+".on"].val})).every((function(e){return!0===e}))}},D=function(e){return function(t){var n=e.ids.statevalues[t+".on"],o=e.ids.statevalues[t+".rgb"];return void 0!==o?o.val:!0===n.val?"#ffffff":"#000000"}},E=function(e,t){return function(n){var o=t.getColorFromZone(n),i=I()(o).greyscale().toString(),s=e.ids.zones[n].allowedPicker;return o!==i&&s.length>1?["wheel","slider","swatches"]:e.ids.zones[n].allowedPicker}},M=function(e){return function(t){return e.ids.zones[t].picker}},N=function(e){return function(t){return"fullColor"===e.ids.zones[t].common.mslZoneType||"fullColor8Zone"===e.ids.zones[t].common.mslZoneType}},z=(n("28a5"),n("f3e3")),L=n.n(z),V=n("c47a"),Z=n.n(V);n("7f7f"),n("ac4d"),n("8a81"),n("ffc1"),n("f751");function U(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=R(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,s=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==o.return||o.return()}finally{if(r)throw i}}}}function R(e,t){if(e){if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var B=function(e,t){e.ids=Object.assign({},t),Object.assign(e.ids.zones,Object.fromEntries(Object.entries(e.ids.zones).map((function(t){var n,o,i,s=D(e)(t[0]),r=I()(s).greyscale().toString(),a=e.ids.statevalues[t[0]+".nightMode"].val,c=t[1].common["mslZoneType"];return"white"===c?(n=["whiteButtons"],o="whiteButtons",i="whiteMode"):(n=["wheel","slider","swatches","whiteSlider"],s===r&&"#000000"!==s?(o="whiteSlider",i="whiteMode"):(o="wheel",i="#000000"===s&&a?"nightMode":"none")),t[1]=Object.assign({},t[1],{picker:o,allowedPicker:n,actionMode:i}),t})))),Object.setPrototypeOf(e.ids.groups,Z()({},Symbol.iterator,a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object.entries(this).sort((function(e,t){var n=e[1].common.name,o=t[1].common.name;return n===o?0:n>o?1:-1})),n=U(t),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=10;break}return i=o.value,e.next=8,i;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})))),Object.setPrototypeOf(e.ids.zones,Z()({},Symbol.iterator,a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object.entries(this).sort((function(e,t){var n=e[1].common.name,o=t[1].common.name;return n===o?0:n>o?1:-1})),n=U(t),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=10;break}return i=o.value,e.next=8,i;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))))},H=function(e,t){Object.assign(e.ids,{instances:t}),Object.setPrototypeOf(e.ids.instances,Z()({},Symbol.iterator,a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object.entries(this).sort((function(e,t){var n=L()(e,1),o=n[0],i=L()(t,1),s=i[0];return o.split(".")[1]-s.split(".")[1]})).map((function(e){return e[1]})),n=U(t),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=10;break}return i=o.value,e.next=8,i;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))))},W=function(e,t){e.ids.statevalues[t.id].val!==t.state.val&&Object.assign(e.ids.statevalues[t.id],t.state)},G=function(e,t){e.ids.statevalues[t.id].val!==t.val&&Object.assign(e.ids.statevalues[t.id],{val:t.val})},J=function(e,t){Object.assign(e.ids.zones[t.zoneId],{picker:t.picker})},Q=function(e,t){Object.assign(e.ids.zones[t.zoneId],{actionMode:t.actionMode})},K=function(e,t){e.debounceTime=t},X=(n("4917"),n("8993")),Y=n.n(X),ee=n("8055"),te=n.n(ee),ne={_socket:null,_onConnChange:null,_onUpdate:null,_isConnected:!1,_disconnectedSince:null,_connCallbacks:{onConnChange:null,onUpdate:null,onRefresh:null,onAuth:null,onCommand:null,onError:null},_authInfo:null,_isAuthDone:!1,_isAuthRequired:!1,_authRunning:!1,_cmdQueue:[],_connTimer:null,_type:"socket.io",_timeout:0,_reconnectInterval:1e4,_reloadInterval:30,_cmdData:null,_cmdInstance:null,_isSecure:!1,_defaultMode:1604,_useStorage:!1,_objects:null,_enums:null,namespace:"vis.0",subscribePattern:"*",getType:function(){return this._type},getIsConnected:function(){return this._isConnected},getIsLoginRequired:function(){return this._isSecure},getUser:function(){return this._user},setReloadTimeout:function(e){this._reloadInterval=parseInt(e,10)},setReconnectInterval:function(e){this._reconnectInterval=parseInt(e,10)},_checkConnection:function(e,t){return this._isConnected?!this._queueCmdIfRequired(e,t)&&(null!==this._socket||(l["default"].$log.debug("socket.io not initialized"),!1)):(l["default"].$log.debug("No connection!"),!1)},_monitor:function(){if(!this._timer){var e=(new Date).getTime();this._reloadInterval&&e-this._lastTimer>1e3*this._reloadInterval?window.location.reload():this._lastTimer=e;var t=this;this._timer=setTimeout((function(){t._timer=null,t._monitor()}),1e4)}},_onAuth:function(e,t){var n=this;this._isSecure=t,this._isSecure&&(n._lastTimer=(new Date).getTime(),this._monitor()),this._socket.emit("subscribe",n.subscribePattern),e&&this._socket.emit("subscribeObjects","*"),!0!==this._isConnected&&(this._isConnected=!0,this._connCallbacks.onConnChange&&setTimeout((function(){n._socket.emit("authEnabled",(function(e,t){n._user=t,n._connCallbacks.onConnChange(n._isConnected),"undefined"!==typeof app&&app.onConnChange(n._isConnected)}))}),0))},reconnect:function(e){var t=this;e.mayReconnect&&!e.mayReconnect()||this._connectInterval||(this._connectInterval=setInterval((function(){l["default"].$log.debug("Trying connect..."),t._socket.connect(),t._countDown=Math.floor(t._reconnectInterval/1e3),"undefined"!==typeof $&&$(".splash-screen-text").html(t._countDown+"...").css("color","red")}),this._reconnectInterval),this._countDown=Math.floor(this._reconnectInterval/1e3),"undefined"!==typeof $&&$(".splash-screen-text").html(this._countDown+"..."),this._countInterval=setInterval((function(){t._countDown--,"undefined"!==typeof $&&$(".splash-screen-text").html(t._countDown+"...")}),1e3))},init:function(e,t,n){var o=this;if("undefined"!==typeof socketNamespace&&(this.namespace=socketNamespace),e=e||{},e.name||(e.name=this.namespace),void 0!==e.subscribePattern&&(this.subscribePattern=e.subscribePattern),(document.URL.split("/local/")[1]||"undefined"===typeof socketUrl&&!e.connLink||"undefined"!==typeof socketUrl&&"local"===socketUrl)&&(this._type="local"),"undefined"!==typeof session){var i=session.get("user");i&&(o._authInfo={user:i,hash:session.get("hash"),salt:session.get("salt")})}this._connCallbacks=t;var s=e.connLink||window.localStorage.getItem("connLink");if(s||"undefined"===typeof socketUrl||(s=socketUrl),e.socketSession||"undefined"===typeof socketSession||(e.socketSession=socketSession),void 0===e.socketForceWebSockets&&"undefined"!==typeof socketForceWebSockets&&(e.socketForceWebSockets=socketForceWebSockets),"local"===this._type)this._isConnected=!0,this._connCallbacks.onConnChange&&this._connCallbacks.onConnChange(this._isConnected),"undefined"!==typeof app&&app.onConnChange(this._isConnected);else if("undefined"!==typeof te.a){var r;e.socketSession=e.socketSession||"nokey",s?(r=s,"undefined"!==typeof s&&":"===s[0]&&(s=location.protocol+"://"+location.hostname+s)):r=location.protocol+"//"+location.host,this._socket=te.a.connect(r,{query:"key="+e.socketSession,"reconnection limit":1e4,"max reconnection attempts":1/0,reconnection:!1,upgrade:!e.socketForceWebSockets,rememberUpgrade:e.socketForceWebSockets,transports:e.socketForceWebSockets?["websocket"]:void 0}),this._socket.on("connect",(function(){if(o._disconnectedSince){var t=(new Date).getTime()-o._disconnectedSince;l["default"].$log.debug("was offline for "+t/1e3+"s"),o._reloadInterval&&t>1e3*o._reloadInterval&&window.location.reload(),o._disconnectedSince=null}o._connectInterval&&(clearInterval(o._connectInterval),o._connectInterval=null),o._countInterval&&(clearInterval(o._countInterval),o._countInterval=null);var i=document.getElementById("server-disconnect");i&&(i.style.display="none"),o._socket.emit("name",e.name),l["default"].$log.debug((new Date).toISOString()+" Connected => authenticate"),setTimeout((function(){var e=setTimeout((function(){l["default"].$log.error("No answer from server"),window.location.reload()}),3e3);o._socket.emit("authenticate",(function(t,i){clearTimeout(e),l["default"].$log.debug((new Date).toISOString()+" Authenticated: "+t),t?o._onAuth(n,i):l["default"].$log.debug("permissionError")}))}),50)})),this._socket.on("reauthenticate",(function(){o._connCallbacks.onConnChange&&(o._connCallbacks.onConnChange(!1),"undefined"!==typeof app&&app.onConnChange(!1)),l["default"].$log.warn("reauthenticate"),window.location.reload()})),this._socket.on("connect_error",(function(){$(".splash-screen-text").css("color","#002951"),o.reconnect(e)})),this._socket.on("disconnect",(function(){if(o._disconnectedSince=(new Date).getTime(),o._isConnected=!1,o._connCallbacks.onConnChange)setTimeout((function(){var e=document.getElementById("server-disconnect");e&&(e.style.display=""),o._connCallbacks.onConnChange(o._isConnected),"undefined"!==typeof app&&app.onConnChange(o._isConnected)}),5e3);else{var t=document.getElementById("server-disconnect");t&&(t.style.display="")}o.reconnect(e)})),this._socket.on("reconnect",(function(){var e=(new Date).getTime()-o._disconnectedSince;l["default"].$log.debug("was offline for "+e/1e3+"s"),o._reloadInterval&&e>1e3*o._reloadInterval&&window.location.reload()})),this._socket.on("objectChange",(function(e,t){if(o._useStorage&&"undefined"!==typeof storage){var n=o._objects||storage.get("objects");n&&(t?n[e]=t:n[e]&&delete n[e],storage.set("objects",n))}o._connCallbacks.onObjectChange&&o._connCallbacks.onObjectChange(e,t)})),this._socket.on("stateChange",(function(e,t){if(e&&null!==t&&"object"===Y()(t))if(o._connCallbacks.onCommand&&e===o.namespace+".control.command"){if(t.ack)return;if(t.val&&"string"===typeof t.val&&"{"===t.val[0]&&"}"===t.val[t.val.length-1])try{t.val=JSON.parse(t.val)}catch(n){l["default"].$log.debug("Command seems to be an object, but cannot parse it: "+t.val)}t.val&&t.val.instance?o._connCallbacks.onCommand(t.val.instance,t.val.command,t.val.data)&&o.setState(e,{val:"",ack:!0}):o._connCallbacks.onCommand(o._cmdInstance,t.val,o._cmdData)&&o.setState(e,{val:"",ack:!0})}else e===o.namespace+".control.data"?o._cmdData=t.val:e===o.namespace+".control.instance"?o._cmdInstance=t.val:o._connCallbacks.onUpdate&&o._connCallbacks.onUpdate(e,t)})),this._socket.on("permissionError",(function(e){o._connCallbacks.onError?o._connCallbacks.onError(e):l["default"].$log.debug("permissionError")}))}},logout:function(e){this._isConnected?this._socket.emit("logout",e):l["default"].$log.debug("No connection!")},getVersion:function(e){this._checkConnection("getVersion",arguments)&&this._socket.emit("getVersion",(function(t){e&&e(t)}))},_checkAuth:function(e){this._isConnected?null!==this._socket?this._socket.emit("getVersion",(function(t){e&&e(t)})):l["default"].$log.debug("socket.io not initialized"):l["default"].$log.debug("No connection!")},readFile:function(e,t,n){if(!t)throw"No callback set";if("local"===this._type)try{var o=storage.get(e);t(null,o?JSON.parse(storage.get(e)):null)}catch(r){t(r,null)}else{if(!this._checkConnection("readFile",arguments))return;if(n||"undefined"===typeof app){var i=this.namespace;if("/"===e[0]){var s=e.split("/");i=s[1],s.splice(0,2),e=s.join("/")}this._socket.emit("readFile",i,e,(function(n,o,i){setTimeout((function(){t(n,o,e,i)}),0)}))}else app.readLocalFile(e.replace(/^\/vis\.0\//,""),t)}},getMimeType:function(e){var t;return-1!==e.indexOf(".")&&(e=e.toLowerCase().match(/\.[^.]+$/)),t=".css"===e?"text/css":".bmp"===e?"image/bmp":".png"===e?"image/png":".jpg"===e||".jpeg"===e?"image/jpeg":".gif"===e?"image/gif":".tif"===e?"image/tiff":".js"===e?"application/javascript":".html"===e||".htm"===e?"text/html":".json"===e?"application/json":".xml"===e?"text/xml":".svg"===e?"image/svg+xml":".eot"===e?"application/vnd.ms-fontobject":".ttf"===e?"application/font-sfnt":".woff"===e?"application/font-woff":".wav"===e?"audio/wav":".mp3"===e?"audio/mpeg3":"text/javascript",t},readFile64:function(e,t,n){var o=this;if(!t)throw"No callback set";if(this._checkConnection("readFile",arguments))if(n||"undefined"===typeof app){var i=this.namespace;if("/"===e[0]){var s=e.split("/");i=s[1],s.splice(0,2),e=s.join("/")}this._socket.emit("readFile64",i,e,(function(n,i,s){setTimeout((function(){t(n,i?{mime:s||o.getMimeType(e),data:i}:{mime:s||o.getMimeType(e)},e)}),0)}))}else app.readLocalFile(e.replace(/^\/vis\.0\//,""),(function(n,i,s){setTimeout((function(){i?t(n,{mime:s||o.getMimeType(e),data:btoa(i)},e):t(n,e)}),0)}))},writeFile:function(e,t,n,o){if("function"===typeof n&&(o=n,n=null),"local"===this._type)storage.set(e,JSON.stringify(t)),o&&o();else{if(!this._checkConnection("writeFile",arguments))return;"object"===Y()(t)&&(t=JSON.stringify(t,null,2));var i=e.split("/"),s=i[1];i.splice(0,2),"vis"===s?this._socket.emit("writeFile",s,i.join("/"),t,n?{mode:this._defaultMode}:{},o):this._socket.emit("writeFile",this.namespace,e,t,n?{mode:this._defaultMode}:{},o)}},writeFile64:function(e,t,n){if(this._checkConnection("writeFile",arguments)){var o=e.split("/"),i=o[1];o.splice(0,2),this._socket.emit("writeFile",i,o.join("/"),atob(t),{mode:this._defaultMode},n)}},readDir:function(e,t){if(null!==this._socket){e||(e="/");var n=e.split("/"),o=n[1];n.splice(0,2),this._socket.emit("readDir",o,n.join("/"),{filter:!0},(function(e,n){t&&t(e,n)}))}else l["default"].$log.debug("socket.io not initialized")},mkdir:function(e,t){var n=e.split("/"),o=n[1];n.splice(0,2),this._socket.emit("mkdir",o,n.join("/"),(function(e){t&&t(e)}))},unlink:function(e,t){var n=e.split("/"),o=n[1];n.splice(0,2),this._socket.emit("unlink",o,n.join("/"),(function(e){t&&t(e)}))},renameFile:function(e,t,n){var o=e.split("/"),i=o[1];o.splice(0,2);var s=t.split("/");s.splice(0,2),this._socket.emit("rename",i,o.join("/"),s.join("/"),(function(e){n&&n(e)}))},setState:function(e,t,n){null!==this._socket&&this._socket.emit("setState",e,t,n)},sendTo:function(e,t,n,o){null!==this._socket&&this._socket.emit("sendTo",e,t,n,o)},getStates:function(e,t){if("function"===typeof e&&(t=e,e=null),"local"===this._type)return t(null,[]);if(this._checkConnection("getStates",arguments)){this.gettingStates=this.gettingStates||0,this.gettingStates++,this.gettingStates>1&&(l["default"].$log.debug("Trying to get empty list, because the whole list could not be loaded"),e=[]);var n=this;this._socket.emit("getStates",e,(function(e,o){n.gettingStates--,e||!o?t&&t(e||"Authentication required"):t&&t(null,o)}))}},_fillChildren:function(e){var t=[];for(var n in e)t.push(n);t.sort();for(var o=0;o<t.length;o++)if(e[t[o]].common){var i=o+1,s=[],r=t[o].length+1,a=t[o]+".";while(i<t.length&&t[i].substring(0,r)===a)s.push(t[i++]);e[t[o]].children=s}},getObjects:function(e,t){if("function"===typeof e&&(t=e,e=!1),this._useStorage&&e)if("undefined"!==typeof storage){var n=this._objects||storage.get("objects");if(n)return t(null,n)}else if(this._objects)return t(null,this._objects);if(this._checkConnection("getObjects",arguments)){var o=this;this._socket.emit("getObjects",(function(e,n){o._socket.emit("getObjectView","system","enum",{startkey:"enum.",endkey:"enum.香"},(function(e,i){if(e)t(e);else{for(var s={},r=0;r<i.rows.length;r++)n[i.rows[r].id]=i.rows[r].value,s[i.rows[r].id]=i.rows[r].value;o._socket.emit("getObjectView","system","instance",{startkey:"system.adapter.",endkey:"system.adapter.香"},(function(e,i){if(e)t(e);else{for(var r=0;r<i.rows.length;r++)n[i.rows[r].id]=i.rows[r].value;n["system.adapter."+o.namespace]&&n["system.adapter."+o.namespace].native&&n["system.adapter."+o.namespace].native.defaultFileMode&&(o._defaultMode=n["system.adapter."+o.namespace].native.defaultFileMode),o._socket.emit("getObjectView","system","channel",{startkey:"",endkey:"香"},(function(e,i){if(e)t(e);else{for(var r=0;r<i.rows.length;r++)n[i.rows[r].id]=i.rows[r].value;o._socket.emit("getObjectView","system","device",{startkey:"",endkey:"香"},(function(e,i){if(e)t(e);else{for(var r=0;r<i.rows.length;r++)n[i.rows[r].id]=i.rows[r].value;o._useStorage&&(o._fillChildren(n),o._objects=n,o._enums=s,"undefined"!==typeof storage&&(storage.set("objects",n),storage.set("enums",s),storage.set("timeSync",(new Date).getTime()))),t&&t(e,n)}}))}}))}}))}}))}))}},getChildren:function(e,t,n){if(this._checkConnection("getChildren",arguments)){if("function"===typeof e&&(n=e,e=null,t=!1),"boolean"===typeof e&&(n=t,t=e,e=null),"function"===typeof t&&(n=t,t=!1),!e)return n("getChildren: no id given");var o=this,i=[];if(this._useStorage&&t)if("undefined"!==typeof storage){var s=storage.get("objects");if(s&&s[e]&&s[e].children)return n(null,s[e].children)}else if(this._objects&&this._objects[e]&&this._objects[e].children)return n(null,this._objects[e].children);o._socket.emit("getObjectView","system","device",{startkey:e+".",endkey:e+".香"},function(t,s){if(t)n(t);else{for(var r=0;r<s.rows.length;r++)i[s.rows[r].id]=s.rows[r].value;o._socket.emit("getObjectView","system","channel",{startkey:e+".",endkey:e+".香"},function(t,s){if(t)n(t);else{for(var r=0;r<s.rows.length;r++)i[s.rows[r].id]=s.rows[r].value;o._socket.emit("getObjectView","system","state",{startkey:e+".",endkey:e+".香"},function(t,o){if(t)n(t);else{for(var s=0;s<o.rows.length;s++)i[o.rows[s].id]=o.rows[s].value;var r=[],a=e.split(".").length;for(var c in i){var u=c.split(".");a+1===u.length&&r.push(c)}if(r.sort(),this._useStorage&&"undefined"!==typeof storage){var l=storage.get("objects")||{};for(var f in i)l[f]=i[f];l[e]&&l[e].common&&(l[e].children=r);var d=[];for(var h in i)d.push(h);d.sort();for(var m=0;m<d.length;m++)if(l[d[m]].common){var p=m+1,g=[],v=d[m].length+1,b=d[m]+".";while(p<d.length&&d[p].substring(0,v)===b)g.push(d[p++]);l[d[m]].children=g}storage.set("objects",l)}n&&n(t,r)}}.bind(this))}}.bind(this))}}.bind(this))}},getObject:function(e,t,n){if("function"===typeof e&&(n=e,e=null,t=!1),"boolean"===typeof e&&(n=t,t=e,e=null),"function"===typeof t&&(n=t,t=!1),!e)return n("no id given");if(this._useStorage&&t&&"undefined"!==typeof storage)if("undefined"!==typeof storage){var o=this._objects||storage.get("objects");if(o&&o[e])return n(null,o[e])}else if(this._enums)return n(null,this._enums);this._socket.emit("getObject",e,function(t,o){if(!t){if(this._useStorage&&"undefined"!==typeof storage){var i=storage.get("objects")||{};i[e]=o,storage.set("objects",i)}return n(null,o)}n(t)}.bind(this))},getEnums:function(e,t,n){if("function"===typeof e&&(n=e,e=null,t=!1),"boolean"===typeof e&&(n=t,t=e,e=null),"function"===typeof t&&(n=t,t=!1),this._useStorage&&t)if("undefined"!==typeof storage){var o=this._enums||storage.get("enums");if(o)return n(null,o)}else if(this._enums)return n(null,this._enums);if("local"===this._type)return n(null,[]);e=e?e+".":"",this._socket.emit("getObjectView","system","enum",{startkey:"enum."+e,endkey:"enum."+e+"香"},function(e,t){if(e)n(e);else{for(var o={},i=0;i<t.rows.length;i++){var s=t.rows[i].value;o[s._id]=s}this._useStorage&&"undefined"!==typeof storage&&storage.set("enums",o),n(null,o)}}.bind(this))},getSyncTime:function(){if(this._useStorage&&"undefined"!==typeof storage){var e=storage.get("timeSync");if(e)return new Date(e)}return null},addObject:function(e,t,n){this._isConnected?null===this._socket&&l["default"].$log.debug("socket.io not initialized"):l["default"].$log.debug("No connection!")},delObject:function(e){this._checkConnection("delObject",arguments)&&this._socket.emit("delObject",e)},httpGet:function(e,t){this._isConnected?null!==this._socket?this._socket.emit("httpGet",e,(function(e){t&&t(e)})):l["default"].$log.debug("socket.io not initialized"):l["default"].$log.debug("No connection!")},logError:function(e){l["default"].$log.debug("Error: "+e),this._isConnected&&(null!==this._socket?this._socket.emit("log","error","Addon DashUI  "+e):l["default"].$log.debug("socket.io not initialized"))},_queueCmdIfRequired:function(e,t){var n=this;return!this._isAuthDone&&(this._cmdQueue.push({func:e,args:t}),this._authRunning||(this._authRunning=!0,this._checkAuth((function(e){if(n._authRunning=!1,e){n._isAuthDone=!0;var t=n._cmdQueue;n._cmdQueue=null,n._cmdQueue=[];for(var o=0,i=t.length;o<i;o++)n[t[o].func].apply(n,t[o].args)}else n._isAuthRequired=!0}))),!0)},authenticate:function(e,t,n){this._authRunning=!0,void 0!==e&&(this._authInfo={user:e,hash:t+n,salt:n}),this._isConnected?this._authInfo||l["default"].$log.debug("No credentials!"):l["default"].$log.debug("No connection!")},getConfig:function(e,t){if(this._checkConnection("getConfig",arguments)){if("function"===typeof e&&(t=e,e=!1),this._useStorage&&e)if("undefined"!==typeof storage){var n=storage.get("objects");if(n&&n["system.config"])return t(null,n["system.config"].common)}else if(this._objects&&this._objects["system.config"])return t(null,this._objects["system.config"].common);var o=this;this._socket.emit("getObject","system.config",(function(e,n){if(t&&n&&n.common){if(o._useStorage&&"undefined"!==typeof storage){var i=storage.get("objects")||{};i["system.config"]=n,storage.set("objects",i)}t(null,n.common)}else t("Cannot read language")}))}},sendCommand:function(e,t,n,o){this.setState(this.namespace+".control.instance",{val:e||"notdefined",ack:!0}),this.setState(this.namespace+".control.data",{val:n,ack:!0}),this.setState(this.namespace+".control.command",{val:t,ack:void 0===o||o})},_detectViews:function(e,t){this.readDir("/"+this.namespace+"/"+e,(function(n,o){for(var i=0;i<o.length;i++)if("vis-views.json"===o[i].file&&(!o[i].acl||o[i].acl.read))return t(n,{name:e,readOnly:o[i].acl&&!o[i].acl.write,mode:o[i].acl?o[i].acl.permissions:0});t(n)}))},readProjects:function(e){var t=this;this.readDir("/"+this.namespace,(function(n,o){for(var i=[],s=0,r=0;r<o.length;r++)o[r].isDir&&(s++,t._detectViews(o[r].file,(function(t,o){o&&i.push(o),n=n||t,--s||e(n,i)})))}))},chmodProject:function(e,t,n){null!==this._socket?this._socket.emit("chmodFile",this.namespace,e+"*",{mode:t},(function(e,t){n&&n(e,t)})):l["default"].$log.debug("socket.io not initialized")},clearCache:function(){"undefined"!==typeof storage&&storage.empty()},getHistory:function(e,t,n){if(this._checkConnection("getHistory",arguments)){t||(t={}),t.timeout||(t.timeout=2e3);var o=setTimeout((function(){o=null,n("timeout")}),t.timeout);this._socket.emit("getHistory",e,t,(function(e,t){o&&(clearTimeout(o),o=null),n(e,t)}))}},getLiveHost:function(e){var t=this;this._socket.emit("getObjectView","system","host",{startkey:"system.host.",endkey:"system.host.香"},(function(n,o){for(var i=[],s=0;s<o.rows.length;s++)i.push(o.rows[s].id+".alive");i.length?t.getStates(i,(function(t,n){for(var o in n)if(n[o].val)return void e(o.substring(0,o.length-".alive".length));e("")})):e("")}))},readDirAsZip:function(e,t,n){if(n||(n=t,t=void 0),this._isConnected)if(null!==this._socket){e.match(/\/$/)&&(e=e.substring(0,e.length-1));var o=this;this.getLiveHost((function(i){i?o._socket.emit("sendToHost",i,"readDirAsZip",{id:o.namespace,name:e||"main",options:{settings:t}},(function(e){e.error&&l["default"].$log.error(e.error),n&&n(e.error,e.data)})):window.alert("No active host found")}))}else l["default"].$log.debug("socket.io not initialized");else l["default"].$log.debug("No connection!")},writeDirAsZip:function(e,t,n){if(this._isConnected)if(null!==this._socket){e.match(/\/$/)&&(e=e.substring(0,e.length-1));var o=this;this.getLiveHost((function(i){i?o._socket.emit("sendToHost",i,"writeDirAsZip",{id:o.namespace,name:e||"main",data:t},(function(e){e.error&&l["default"].$log.error(e.error),n&&n(e.error)})):window.alert("No active host found")}))}else l["default"].$log.debug("socket.io not initialized");else l["default"].$log.debug("No connection!")}},oe=function(e,t){var n=e.commit;n("setAllMslids",t)},ie=function(e,t){var n=e.commit;n("setInstances",t)},se=function(e,t){var n=e.commit;n("setState",t)},re=function(e,t){var n=e.commit;n("setStateFromClient",t),ne.setState(t.id,t.val)},ae=function(e,t){var n=e.commit;n("setActivePicker",t)},ce=function(e,t){var n=e.commit;n("setActionMode",t)},ue=function(e,t){var n=e.commit;n("setDebounceTime",t)},le={namespaced:!0,state:w,getters:o,mutations:i,actions:s};l["default"].use(y["a"]);var fe=function(){var e=new y["a"].Store({modules:{msladapter:le},strict:!1});return e},de=n("8c4f"),he=[{path:"/",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"d251"))},children:[{path:"",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"0de7"))},props:!0,beforeEnter:function(e,t,n){t.params.instanceId?e.params.instanceId=t.params.instanceId:e.params.instanceId=e.meta.store.getters["msladapter/getInstancesAsArray"][0].instance_id,n()}},{path:":zoneId",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"7065"))},props:!0,beforeEnter:function(e,t,n){void 0===e.meta.store.state.msladapter.ids.zones[e.params.zoneId]?n({path:"/",replace:!0}):(e.params.instanceId=e.params.zoneId.split(".").slice(0,2).join("."),n())},children:[{path:"",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"a574"))},props:!0}]}]}];he.push({path:"*",redirect:"/"});var me=he;l["default"].use(de["a"]);var pe=function(e){var t=e.store,n=new de["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:me,mode:"hash",base:""});return n.beforeEach((function(e,n,o){e.meta.store||(e.meta.store=t),o()})),n},ge=function(){return ve.apply(this,arguments)};function ve(){return ve=u()(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof fe){e.next=6;break}return e.next=3,fe({Vue:l["default"]});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=fe;case 7:if(t=e.t0,"function"!==typeof pe){e.next=14;break}return e.next=11,pe({Vue:l["default"],store:t});case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=pe;case 15:return n=e.t1,t.$router=n,o={el:"#q-app",router:n,store:t,render:function(e){return e(k)}},e.abrupt("return",{app:o,store:t,router:n});case 19:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}var be=n("9483");Object(be["a"])("service-worker.js",{ready:function(){0},registered:function(){0},cached:function(){0},updatefound:function(){0},updated:function(){0},offline:function(){0},error:function(e){0}});var _e=n("85ff"),ke=n.n(_e),ye={isEnabled:!0,logLevel:"error",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0};l["default"].use(ke.a,ye);var we=n("ce19");l["default"].use(we["a"]);n("551c");var Ce=n("bc3a"),je=n.n(Ce),Se=function(){var e=u()(a.a.mark((function e(t){var n,o,i,s,r,c,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.store,d["a"].show(),e.next=6;break;case 6:return s=document.location.href.split("/").slice(0,3).join("/"),e.next=9,je.a.get(s+"/options");case 9:r=e.sent.data,o=r.port,i=r.debounceTime,n.dispatch("msladapter/setDebounceTime",i);case 13:return e.next=15,new Promise((function(e,t){ne.init({connLink:"http://"+document.domain+":"+o,socketSession:"",subscribePattern:["milight-smart-light.*","system.adapter.milight-smart-light.*.alive","system.adapter.milight-smart-light.*.connected"]},{onConnChange:function(){var t=u()(a.a.mark((function t(n){return a.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=24;break}return t.t0=e,t.next=4,Ie("device","milight-smart-light");case 4:return t.t1=t.sent,t.next=7,Ie("channel","milight-smart-light");case 7:return t.t2=t.sent,t.next=10,Ie("state","milight-smart-light");case 10:return t.t3=t.sent,t.next=13,Ie("statevalue","milight-smart-light");case 13:return t.t4=t.sent,t.next=16,Ie("state","system.adapter.milight-smart-light");case 16:return t.t5=t.sent,t.next=19,Ie("statevalue","system.adapter.milight-smart-light");case 19:t.t6=t.sent,t.t7={groups:t.t1,zones:t.t2,states:t.t3,statevalues:t.t4,adminstates:t.t5,adminstatevalues:t.t6},(0,t.t0)(t.t7),t.next=25;break;case 24:l["default"].$log.debug("disconnected");case 25:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),onUpdate:function(e,t){t&&t.ack&&(n.dispatch("msladapter/setState",{id:e,state:t}),"system"!==e.split(".")[0]&&l["default"].$log.debug("NEW VALUE of ID --\x3e "+e+": "+JSON.stringify(t,null,"|")))}})})).catch((function(e){return l["default"].$log.error("[middleware:connection]: "+e)}));case 15:return c=e.sent,Object.assign(c.statevalues,c.adminstatevalues),n.dispatch("msladapter/setAllMslids",c),e.next=20,Promise.all(n.getters["msladapter/getInstanceNames"].map((function(e){return new Promise((function(t,n){ne._socket.emit("getObject",e,(function(e,n){t(n)}))}))})));case 20:f=e.sent.map((function(e){return[e._id.split(".").slice(2).join("."),Object.assign(e,{instance_id:e._id.split(".").splice(2).join(".")})]})),n.dispatch("msladapter/setInstances",Object.fromEntries(f)),d["a"].hide();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ie(e,t){return Oe.apply(this,arguments)}function Oe(){return Oe=u()(a.a.mark((function e(t,n){return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){"statevalue"===t?ne.getStates(n+"*",(function(t,n){t&&o(t),e(n)})):ne._socket.emit("getObjectView","system",t,{startkey:n+".",endkey:n+".香"},(function(t,n){t&&o(t);for(var i={},s=0;s<n.rows.length;s++)i[n.rows[s].id]=n.rows[s].value;e(i)}))})));case 1:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function xe(){return Ae.apply(this,arguments)}function Ae(){return Ae=u()(a.a.mark((function e(){var t,n,o,i,s,r,c,u,f;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:t=e.sent,n=t.app,o=t.store,i=t.router,s=!0,r=function(e){s=!1,window.location.href=e},c=window.location.href.replace(window.location.origin,""),u=[void 0,void 0,Se],f=0;case 11:if(!(!0===s&&f<u.length)){e.next=29;break}if("function"===typeof u[f]){e.next=14;break}return e.abrupt("continue",26);case 14:return e.prev=14,e.next=17,u[f]({app:n,router:i,store:o,Vue:l["default"],ssrContext:null,redirect:r,urlPath:c});case 17:e.next=26;break;case 19:if(e.prev=19,e.t0=e["catch"](14),!e.t0||!e.t0.url){e.next=24;break}return window.location.href=e.t0.url,e.abrupt("return");case 24:return console.error("[Quasar] boot error:",e.t0),e.abrupt("return");case 26:f++,e.next=11;break;case 29:if(!1!==s){e.next=31;break}return e.abrupt("return");case 31:new l["default"](n);case 32:case"end":return e.stop()}}),e,null,[[14,19]])}))),Ae.apply(this,arguments)}/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&n.e(0).then(n.t.bind(null,"a0db",7)),xe()},"31cd":function(e,t,n){}});